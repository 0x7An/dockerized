# TODO
# - connect to Dovecot SASL auth server
# - connect to Amavisd-new
# - connect to iRedAPD

FROM alpine:3.10.3
MAINTAINER Zhang Huangbin <zhb@iredmail.org>
EXPOSE 25 465 587 7790

RUN echo https://mirrors.cloud.tencent.com/alpine/v3.10/main > /apk.repo && echo https://mirrors.cloud.tencent.com/alpine/v3.10/community >> /apk.repo && apk add --no-cache --progress --repositories-file /apk.repo postfix postfix-pcre postfix-mysql mlmmj altermime py-requests uwsgi uwsgi-python uwsgi-syslog

COPY ./config/etc/postfix/. /etc/postfix/

CMD /usr/sbin/postfix start
